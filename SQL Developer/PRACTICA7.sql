--                           ->TABLA COMPUTADORA<-
CREATE TABLE COMPUTADORA_C(
    ID NUMBER PRIMARY KEY,
    MODELO NVARCHAR2(50),
    PRECIO NUMBER,
    FECHA_REG DATE,
    ID_MARCA NUMBER,
    ID_RAM NUMBER,
    ID_HD NUMBER,
    ID_PROCESADOR NUMBER,
    ID_MATERIAL NUMBER,
    ID_PANTALLA NUMBER,
    CONSTRAINT FK_COMPU_MARCA FOREIGN KEY(ID_MARCA) REFERENCES MARCA_C(ID),
    CONSTRAINT FK_COMPU_RAM FOREIGN KEY(ID_RAM) REFERENCES RAM_C(ID),
    CONSTRAINT FK_COMPU_HARDDISK FOREIGN KEY(ID_HD) REFERENCES HD_C(ID_HD),
    CONSTRAINT FK_COMPU_PROCESADOR FOREIGN KEY(ID_PROCESADOR) REFERENCES PROCESADOR_C(ID),
    CONSTRAINT FK_COMPU_MATERIAL FOREIGN KEY(ID_MATERIAL) REFERENCES MATERIAL_C(ID),
    CONSTRAINT FK_COMPU_PANTALLA FOREIGN KEY(ID_PANTALLA) REFERENCES PANTALLA_C(ID)
);

--                           ->INSERT COMPUTADORA<-
INSERT INTO COMPUTADORA_C VALUES(1, 'M-01', 20000, '01-01-2020', 1, 1, 1, 1, 1, 1);
INSERT INTO COMPUTADORA_C VALUES(2, 'M-02', 25000, '01-02-2018', 2, 3, 4, 5, 5, 1);
INSERT INTO COMPUTADORA_C VALUES(3, 'M-03', 32000, '01-04-2019', 5, 4, 3, 2, 2, 2);
INSERT INTO COMPUTADORA_C VALUES(4, 'R-01', 18000, '01-06-2010', 4, 3, 4, 5, 3, 2);
INSERT INTO COMPUTADORA_C VALUES(5, 'R-01', 22000, '01-10-2020', 2, 2, 2, 5, 3, 1);
INSERT INTO COMPUTADORA_C VALUES(6, 'Z01', 21000, '01-08-2020', 1, 2, 3, 3, 4, 1);

SELECT * FROM COMPUTADORA_C;
--                           ->TABLA MARCA<- CREADO
CREATE TABLE MARCA_C(
    ID NUMBER PRIMARY KEY,
    ORIGEN NVARCHAR2(40),
    NOMBRE NVARCHAR2(40),
    SLOGAN NVARCHAR2(40)
);

--                           ->INSERT MARCA<- CREADO
INSERT INTO MARCA_C VALUES(1,'TAIWAN','TAIWANEITOR XD','ANTES QUE NADA UNICA');
INSERT INTO MARCA_C VALUES(2,'KOREA','ASUS','SIEMPRE ASUS');
INSERT INTO MARCA_C VALUES(3,'VIETNAM','SONY','POR QUE SONY');
INSERT INTO MARCA_C VALUES(4,'USA','DELL','POR QUE SOMOS AMERICA');
INSERT INTO MARCA_C VALUES(5,'MEXICO','ACER','VIVA MEXICO');
SELECT * FROM MARCA_C;

--                           ->TABLA RAM<- CREADO
CREATE TABLE RAM_C(
    ID NUMBER PRIMARY KEY,
    CAPACIDAD NVARCHAR2(20),
    TIPO NVARCHAR2(20),
    TIPO_PUERTO NVARCHAR2(20),
    LATENCIA NUMBER
);

--                           ->INSERT RAM<- CREADO
INSERT INTO RAM_C VALUES(1, '4GB', 'DDR', 'DIMM', 5);
INSERT INTO RAM_C VALUES(2, '8GB', 'DDR2', 'SO-DIMM', 8);
INSERT INTO RAM_C VALUES(3, '16GB', 'DDR3', 'DIMM', 10);
INSERT INTO RAM_C VALUES(4, '32GB', 'DDR', 'SO-DIMM', 10);
INSERT INTO RAM_C VALUES(5, '4GB', 'DDR4', 'DIMM', 8);
SELECT * FROM RAM_C;

--                           ->TABLA PROCESADOR<- CREADO
CREATE TABLE PROCESADOR_C(
    ID NUMBER PRIMARY KEY,
    NOMBRE NVARCHAR2(100),
    MODELO NVARCHAR2(50),
    FABRICANTE NVARCHAR2(50),
    VELOCIDAD NUMBER,
    GENERACION NVARCHAR2(50),
    PRECIO NUMBER
);
--                           ->INSERT PROCESADOR<- CREADO
INSERT INTO PROCESADOR_C VALUES (1, 'CORE I7', '7700HQ', 'INTEL', 2.8, 'SEPTIMA', 6000 );
INSERT INTO PROCESADOR_C VALUES (2, 'CORE I3', '2200', 'INTEL', 1.7, 'SEGUNDA', 500 );
INSERT INTO PROCESADOR_C VALUES (3, 'RYZEN 3', '3400G', 'AMD', 3.6, 'TERCERA', 8000 );
INSERT INTO PROCESADOR_C VALUES (4, 'ATHLON', 'X2 1750', 'AMD', 3.2, 'CUARTA', 2000 );
INSERT INTO PROCESADOR_C VALUES (5, 'PENTIUM', 'G4560', 'INTEL', 2.81, 'QUINTA', 1500 );
SELECT * FROM PROCESADOR_C

--                           ->TABLA MATERIAL<- CREADO
CREATE TABLE MATERIAL_C(
    ID NUMBER PRIMARY KEY,
    MATERIAL NVARCHAR2(50)
);

--                           ->INSERT MATERIAL<-CREADO
INSERT INTO MATERIAL_C VALUES(1, 'PLASTICO');
INSERT INTO MATERIAL_C VALUES(2, 'FIBRA DE VIDRIO');
INSERT INTO MATERIAL_C VALUES(3, 'CARTON');
INSERT INTO MATERIAL_C VALUES(4, 'ORO');
INSERT INTO MATERIAL_C VALUES(5, 'MADERA');
SELECT * FROM MATERIAL_C

--                           ->TABLA HD<- CREADO
CREATE TABLE HD_C(
    ID_HD NUMBER PRIMARY KEY,
    MARCA_HD NVARCHAR2(30),
    CAPACIDAD NUMBER, --GB
    VELOCIDAD NUMBER, --RPM
    FORMATO NVARCHAR2(30) --SOLIDO / NORMAL    
);

--                           ->INSERT HD<- CREADO
INSERT INTO HD_C VALUES(1,'ADATA', 200, 5400, 'NORMAL');
INSERT INTO HD_C VALUES(2,'TOSHIBA', 1800, 3210, 'SOLIDO');
INSERT INTO HD_C VALUES(3,'SEAGATE', 350, 4100, 'SOLIDO');
INSERT INTO HD_C VALUES(4,'AMD', 1068, 2300, 'NORMAL');
INSERT INTO HD_C VALUES(5,'ADATA', 150, 610, 'NORMAL');
SELECT * FROM HD_C

--                           ->TABLA PANTALLA<- CREADO
CREATE TABLE PANTALLA_C(
    ID NUMBER PRIMARY KEY,
    MARCA NVARCHAR2(30),
    MODELO NVARCHAR2(30),
    TIPO NVARCHAR2(30),
    PRECIO NUMBER
);

--                           ->INSERT PANTALLA<- CREADO
INSERT INTO PANTALLA_C VALUES(1, 'SAMSUNG', 'M1', '4K', 10000);
INSERT INTO PANTALLA_C VALUES(2, 'MAC', 'M2', 'BULBOS', 1000);
INSERT INTO PANTALLA_C VALUES(3, 'LG', 'M1', 'PLANA', 10000);
INSERT INTO PANTALLA_C VALUES(4, 'SAMSUNG', 'M3', '4K', 12000);
INSERT INTO PANTALLA_C VALUES(5, 'SONY', 'M1', 'PLANA', 8000);
SELECT * FROM PANTALLA_C

--1 TODAS LAS RELACIONES(A LAS TABLAS).
SELECT *
/*COMPUTADORA_C.ID, COMPUTADORA_C.MODELO, COMPUTADORA_C.PRECIO, COMPUTADORA_C.FECHA_REG,
(
    CASE COMPUTADORA_C.ID_MARCA
    WHEN 1 THEN 'TAIWANEITOR'
    WHEN 2 THEN 'ASUS'
    WHEN 3 THEN 'SONY'
    WHEN 4 THEN 'DELL'
    WHEN 5 THEN 'ACER'
    ELSE 'NO EXISTE'
    END
) AS MARCA,
(
    CASE COMPUTADORA_C.ID_RAM
    WHEN 1 THEN '4GB'
    WHEN 2 THEN '8GB'
    WHEN 3 THEN '16GB'
    WHEN 4 THEN '32GB'
    WHEN 5 THEN '4GB'
    ELSE 'NO EXISTE'
    END
) AS RAM, 

(
    CASE COMPUTADORA_C.ID_HD
    WHEN 1 THEN 'ADATA'
    WHEN 2 THEN 'TOSHIBA'
    WHEN 3 THEN 'SEAGATE'
    WHEN 4 THEN 'AMD'
    WHEN 5 THEN 'ADATA'
    ELSE 'NO EXISTE'
    END
) AS HD, 
(
    CASE COMPUTADORA_C.ID_PROCESADOR
    WHEN 1 THEN 'CORE I7'
    WHEN 2 THEN 'CORE I3'
    WHEN 3 THEN 'RYZEN 3'
    WHEN 4 THEN 'ATHLON'
    WHEN 5 THEN 'PENTIUM'
    ELSE 'NO EXISTE'
    END
)AS PROCESADOR, 
(
    CASE COMPUTADORA_C.ID_MATERIAL
    WHEN 1 THEN 'PLASTICO'
    WHEN 2 THEN 'FIBRA DE VIDRIO'
    WHEN 3 THEN 'CARTON'
    WHEN 4 THEN 'ORO'
    WHEN 5 THEN 'MADERA'
    ELSE 'NO EXISTE'
    END
) AS MATERIAL, 
(
    CASE COMPUTADORA_C.ID_PANTALLA
    WHEN 1 THEN 'SAMSUNG'
    WHEN 2 THEN 'MAC'
    WHEN 3 THEN 'LG'
    WHEN 4 THEN 'SAMSUNG'
    WHEN 5 THEN 'SONY'
    ELSE 'NO EXISTE'
    END
) AS PANTALLA*/
FROM COMPUTADORA_C
INNER JOIN MARCA_C
ON MARCA_C.ID = COMPUTADORA_C.ID_MARCA
INNER JOIN RAM_C
ON RAM_C.ID = COMPUTADORA_C.ID_RAM
INNER JOIN HD_C
ON HD_C.ID_HD = COMPUTADORA_C.ID_HD
INNER JOIN PROCESADOR_C
ON PROCESADOR_C.ID = COMPUTADORA_C.ID_PROCESADOR
INNER JOIN MATERIAL_C
ON MATERIAL_C.ID = COMPUTADORA_C.ID_MATERIAL
INNER JOIN PANTALLA_C
ON PANTALLA_C.ID = COMPUTADORA_C.ID_PANTALLA

--2 MOSTRAR LA COMPUTADORA MAS CARA
SELECT * FROM COMPUTADORA_C
INNER JOIN MARCA_C
ON MARCA_C.ID = COMPUTADORA_C.ID_MARCA
INNER JOIN RAM_C
ON RAM_C.ID = COMPUTADORA_C.ID_RAM
INNER JOIN HD_C
ON HD_C.ID_HD = COMPUTADORA_C.ID_HD
INNER JOIN PROCESADOR_C
ON PROCESADOR_C.ID = COMPUTADORA_C.ID_PROCESADOR
INNER JOIN MATERIAL_C
ON MATERIAL_C.ID = COMPUTADORA_C.ID_MATERIAL
INNER JOIN PANTALLA_C
ON PANTALLA_C.ID = COMPUTADORA_C.ID_PANTALLA
WHERE COMPUTADORA_C.PRECIO = (SELECT MAX(COMPUTADORA_C.PRECIO) FROM COMPUTADORA_C);

--3 BUSCAR LA COMPUTADORA QUE SU MARCA SEA 'USA'
SELECT * FROM COMPUTADORA_C
INNER JOIN MARCA_C
ON MARCA_C.ID = COMPUTADORA_C.ID_MARCA
INNER JOIN RAM_C
ON RAM_C.ID = COMPUTADORA_C.ID_RAM
INNER JOIN HD_C
ON HD_C.ID_HD = COMPUTADORA_C.ID_HD
INNER JOIN PROCESADOR_C
ON PROCESADOR_C.ID = COMPUTADORA_C.ID_PROCESADOR
INNER JOIN MATERIAL_C
ON MATERIAL_C.ID = COMPUTADORA_C.ID_MATERIAL
INNER JOIN PANTALLA_C
ON PANTALLA_C.ID = COMPUTADORA_C.ID_PANTALLA
WHERE MARCA_C.ORIGEN LIKE 'USA';

--4 CONTAR CUANTAS COMPTUADORA TENGO DE CADA PROCESADOR
SELECT COUNT (COMPUTADORA_C.ID_PROCESADOR) AS PROCESADOR
FROM COMPUTADORA_C
INNER JOIN MARCA_C
ON MARCA_C.ID = COMPUTADORA_C.ID_MARCA
INNER JOIN RAM_C
ON RAM_C.ID = COMPUTADORA_C.ID_RAM
INNER JOIN HD_C
ON HD_C.ID_HD = COMPUTADORA_C.ID_HD
INNER JOIN PROCESADOR_C
ON PROCESADOR_C.ID = COMPUTADORA_C.ID_PROCESADOR
INNER JOIN MATERIAL_C
ON MATERIAL_C.ID = COMPUTADORA_C.ID_MATERIAL
INNER JOIN PANTALLA_C
ON PANTALLA_C.ID = COMPUTADORA_C.ID_PANTALLA
GROUP BY (COMPUTADORA_C.ID);

--5 BUSCAR LA COMPUTADORA MAS RECIENTE
SELECT * FROM COMPUTADORA_C
INNER JOIN MARCA_C
ON MARCA_C.ID = COMPUTADORA_C.ID_MARCA
INNER JOIN RAM_C
ON RAM_C.ID = COMPUTADORA_C.ID_RAM
INNER JOIN HD_C
ON HD_C.ID_HD = COMPUTADORA_C.ID_HD
INNER JOIN PROCESADOR_C
ON PROCESADOR_C.ID = COMPUTADORA_C.ID_PROCESADOR
INNER JOIN MATERIAL_C
ON MATERIAL_C.ID = COMPUTADORA_C.ID_MATERIAL
INNER JOIN PANTALLA_C
ON PANTALLA_C.ID = COMPUTADORA_C.ID_PANTALLA
WHERE COMPUTADORA_C.FECHA_REG = (SELECT MAX(COMPUTADORA_C.FECHA_REG) FROM COMPUTADORA_C)
/*SELECT *
FROM TABLA1
INNER JOIN TABLA2
ON TABLA2.ID = TABLA1.ID_TABLA2
INNER JOIN TABLA3
ON TABLE3.ID = TABLA1.ID_TABLA3
INNER JOIN TABLA4
ON TABLA4.ID = TABLA1.ID_TABLA4*/



